<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KC - ÂèëÁé∞Á≤æÂΩ©Áü≠ËßÜÈ¢ë</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
        }
        
        /* Ê®°ÊÄÅÊ°Ü */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .modal-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .modal-tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #999;
        }
        
        .modal-tab.active {
            color: #ff3366;
            border-bottom: 2px solid #ff3366;
        }
        
        .modal-form {
            display: none;
        }
        
        .modal-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ff3366;
        }
        
        .captcha-group {
            display: flex;
            gap: 10px;
        }
        
        .captcha-input {
            flex: 1;
        }
        
        .captcha-btn {
            width: 120px;
            padding: 12px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .captcha-btn:hover {
            background-color: #444;
        }
        
        .captcha-btn:disabled {
            background-color: #222;
            color: #666;
            cursor: not-allowed;
        }
        
        .btn {
            padding: 12px;
            background-color: #ff3366;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.2s;
        }
        
        .btn:hover {
            background-color: #ff4d7d;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .modal-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #999;
        }
        
        .modal-link {
            color: #ff3366;
            cursor: pointer;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            color: #999;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* È°∂ÈÉ®ÂØºËà™Ê†è */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background-color: #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            z-index: 100;
            border-bottom: 1px solid #333;
        }
        
        .logo {
            color: #ff3366;
            font-weight: bold;
            font-size: 22px;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
        }
        
        .search-icon, .camera-icon, .user-icon {
            width: 24px;
            height: 24px;
            color: #fff;
            margin-left: 15px;
            cursor: pointer;
        }
        
        .login-btn {
            background-color: #ff3366;
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            margin-left: 15px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            margin-left: 15px;
            background-color: #fff;
        }
        
        /* Â∫ïÈÉ®ÂØºËà™Ê†è */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 55px;
            background-color: #000;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #333;
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 10px;
            color: #999;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .nav-item.active {
            color: #ff3366;
        }
        
        .nav-item:hover {
            color: #ff3366;
        }
        
        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 2px;
        }
        
        /* ËßÜÈ¢ëÊµÅÂå∫Âüü */
        .video-container {
            margin-top: 50px;
            margin-bottom: 55px;
            height: calc(100vh - 105px);
            overflow-y: auto;
            scroll-snap-type: y mandatory;
        }
        
        .video-item {
            position: relative;
            height: 100vh;
            scroll-snap-align: start;
            overflow: hidden;
        }
        
        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ËßÜÈ¢ë‰ø°ÊÅØÂå∫Âüü */
        .video-info {
            position: absolute;
            bottom: 80px;
            left: 12px;
            right: 12px;
        }
        
        .username {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .video-desc {
            font-size: 14px;
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .music-info {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: #ddd;
            margin-bottom: 16px;
        }
        
        .music-icon {
            width: 12px;
            height: 12px;
            margin-right: 4px;
        }
        
        /* Âè≥‰æßÊìç‰ΩúÊ†è */
        .action-bar {
            position: absolute;
            right: 12px;
            bottom: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .action-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .action-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 4px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }
        
        .action-icon:hover {
            transform: scale(1.1);
        }
        
        .action-icon.liked {
            background-color: rgba(255, 51, 102, 0.2);
        }
        
        .action-count {
            font-size: 12px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #fff;
            margin-bottom: 4px;
            background-color: #fff;
        }
        
        /* ÁÇπËµûÂä®Áîª */
        .like-animation {
            position: absolute;
            pointer-events: none;
            z-index: 10;
            animation: like-animation 1s ease-out forwards;
        }
        
        @keyframes like-animation {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1) translateY(-50px);
                opacity: 0;
            }
        }
        
        /* Áî®Êà∑‰∏ªÈ°µ */
        .profile-page {
            display: none;
            margin-top: 50px;
            margin-bottom: 55px;
            padding: 15px;
            overflow-y: auto;
            height: calc(100vh - 105px);
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 15px;
            position: relative;
            cursor: pointer;
            background-color: #fff;
        }
        
        .avatar-edit {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: #ff3366;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-id {
            font-size: 14px;
            color: #999;
            margin-bottom: 10px;
        }
        
        .profile-stats {
            display: flex;
            margin-bottom: 15px;
        }
        
        .stat-item {
            margin-right: 20px;
            text-align: center;
            cursor: pointer;
        }
        
        .stat-count {
            font-size: 16px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            color: #999;
        }
        
        .profile-actions {
            display: flex;
        }
        
        .profile-btn {
            flex: 1;
            padding: 8px;
            text-align: center;
            background-color: #333;
            border-radius: 4px;
            margin-right: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .profile-btn:hover {
            background-color: #444;
        }
        
        .profile-btn.primary {
            background-color: #ff3366;
        }
        
        .profile-btn.primary:hover {
            background-color: #ff4d7d;
        }
        
        .profile-tabs {
            display: flex;
            border-bottom: 1px solid #333;
            margin-bottom: 15px;
        }
        
        .profile-tab {
            padding: 10px 15px;
            font-size: 14px;
            color: #999;
            cursor: pointer;
        }
        
        .profile-tab.active {
            color: #ff3366;
            border-bottom: 2px solid #ff3366;
        }
        
        .profile-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
        }
        
        .profile-video {
            aspect-ratio: 9/16;
            background-color: #2a2a2a;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }
        
        .profile-video img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-overlay {
            position: absolute;
            bottom: 5px;
            left: 5px;
            display: flex;
            align-items: center;
            font-size: 12px;
            color: #fff;
        }
        
        /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
        @media (min-width: 768px) {
            .video-container, .profile-page {
                width: 414px;
                margin-left: auto;
                margin-right: auto;
                border-left: 1px solid #333;
                border-right: 1px solid #333;
            }
        }
        
        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 60px;
        }
        
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ff3366;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ÈÇÆÁÆ±È™åËØÅÊèêÁ§∫ */
        .email-hint {
            font-size: 12px;
            color: #ff3366;
            margin-top: 5px;
            display: none;
        }
        
        /* Â£∞Èü≥ÊéßÂà∂ */
        .sound-control {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
        }
        
        .sound-icon {
            color: white;
            font-size: 20px;
        }
        
        /* ÈîôËØØÊèêÁ§∫ */
        .error-message {
            color: #ff3366;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        
        /* ÂèëÂ∏ÉÊåâÈíÆÂä®Áîª */
        .publish-animation {
            position: fixed;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background-color: #ff3366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 51, 102, 0.3);
            z-index: 90;
            transition: transform 0.3s;
        }
        
        .publish-animation:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        /* ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü */
        .comment-modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70vh;
            background-color: #1a1a1a;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .comment-header {
            padding: 15px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .comment-list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .comment-item {
            display: flex;
            margin-bottom: 15px;
        }
        
        .comment-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: #fff;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-user {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .comment-text {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .comment-actions {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .comment-like {
            font-size: 12px;
            color: #999;
            margin-left: 15px;
        }
        
        .comment-input {
            padding: 15px;
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
        }
        
        .comment-input input {
            flex: 1;
            padding: 10px 15px;
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 20px;
            color: #fff;
            font-size: 14px;
        }
        
        .comment-input input:focus {
            outline: none;
            border-color: #ff3366;
        }
        
        .comment-send {
            margin-left: 10px;
            color: #ff3366;
            font-size: 20px;
            cursor: pointer;
        }
        
        /* ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü */
        .share-modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #1a1a1a;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .share-header {
            padding: 15px;
            border-bottom: 1px solid #333;
            text-align: center;
            font-weight: bold;
        }
        
        .share-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            padding: 20px;
            gap: 15px;
        }
        
        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        
        .share-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            font-size: 20px;
        }
        
        .share-label {
            font-size: 12px;
            color: #ddd;
        }
        
        /* Â§¥ÂÉè‰∏ä‰º†Ê®°ÊÄÅÊ°Ü */
        .avatar-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            display: none;
        }
        
        .avatar-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .avatar-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .avatar-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background-color: #2a2a2a;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .avatar-btn {
            flex: 1;
            margin: 0 5px;
        }
        
        /* ÂèëÂ∏ÉËßÜÈ¢ëÊ®°ÊÄÅÊ°Ü */
        .publish-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            display: none;
        }
        
        .publish-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .publish-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .publish-preview {
            width: 100%;
            aspect-ratio: 9/16;
            background-color: #2a2a2a;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .publish-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .publish-upload {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .publish-upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #333;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .publish-upload-btn:hover {
            background-color: #444;
        }
        
        .publish-form {
            margin-bottom: 20px;
        }
        
        .publish-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .publish-btn {
            flex: 1;
            margin: 0 5px;
        }
        
        /* ÈÄöÁü• */
        .notification {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ff3366;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            z-index: 1000;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* È™åËØÅÁ†ÅÂÄíËÆ°Êó∂ */
        .countdown {
            color: #ff3366;
            font-size: 12px;
            margin-top: 5px;
        }
        
        /* ÊêúÁ¥¢Ê®°ÊÄÅÊ°Ü */
        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            display: none;
        }
        
        .search-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .search-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .search-input-group {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 15px;
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px 0 0 6px;
            color: #fff;
            font-size: 14px;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #ff3366;
        }
        
        .search-btn {
            padding: 12px 20px;
            background-color: #ff3366;
            color: #fff;
            border: none;
            border-radius: 0 6px 6px 0;
            font-size: 14px;
            cursor: pointer;
        }
        
        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .search-result-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #333;
            cursor: pointer;
        }
        
        .search-result-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: #fff;
        }
        
        .search-result-info {
            flex: 1;
        }
        
        .search-result-name {
            font-weight: bold;
            font-size: 14px;
        }
        
        .search-result-id {
            font-size: 12px;
            color: #999;
        }
        
        /* Ê∂àÊÅØÈ°µÈù¢ */
        .message-page {
            display: none;
            margin-top: 50px;
            margin-bottom: 55px;
            padding: 15px;
            overflow-y: auto;
            height: calc(100vh - 105px);
        }
        
        .message-list {
            margin-bottom: 15px;
        }
        
        .message-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #333;
            cursor: pointer;
        }
        
        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 12px;
            background-color: #fff;
        }
        
        .message-content {
            flex: 1;
        }
        
        .message-user {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .message-text {
            font-size: 12px;
            color: #999;
        }
        
        .message-time {
            font-size: 10px;
            color: #666;
        }
        
        /* ÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®Ê®°ÊÄÅÊ°Ü */
        .follow-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            display: none;
        }
        
        .follow-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .follow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }
        
        .follow-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .follow-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .follow-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            font-size: 14px;
            color: #999;
        }
        
        .follow-tab.active {
            color: #ff3366;
            border-bottom: 2px solid #ff3366;
        }
        
        .follow-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .follow-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #333;
        }
        
        .follow-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: #fff;
        }
        
        .follow-info {
            flex: 1;
        }
        
        .follow-name {
            font-weight: bold;
            font-size: 14px;
        }
        
        .follow-id {
            font-size: 12px;
            color: #999;
        }
        
        .follow-action {
            padding: 6px 12px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .follow-action.following {
            background-color: #ff3366;
        }
        
        /* ÈÄÄÂá∫ÁôªÂΩïÊ®°ÊÄÅÊ°Ü */
        .logout-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            display: none;
        }
        
        .logout-container {
            background-color: #1a1a1a;
            width: 90%;
            max-width: 300px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        
        .logout-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .logout-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .logout-btn {
            flex: 1;
            margin: 0 5px;
        }
        
        .logout-btn.cancel {
            background-color: #333;
        }
    </style>
</head>
<body>
    <!-- ÁôªÂΩï/Ê≥®ÂÜåÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="authModal">
        <div class="modal-container">
            <div class="close-modal" id="closeAuth">&times;</div>
            <div class="modal-tabs">
                <div class="modal-tab active" data-tab="login">ÁôªÂΩï</div>
                <div class="modal-tab" data-tab="register">Ê≥®ÂÜå</div>
            </div>
            
            <form class="modal-form active" id="loginForm">
                <div class="form-group">
                    <input type="text" class="form-input" placeholder="KCÂè∑/Áî®Êà∑Âêç" id="loginUsername" required>
                    <div class="error-message" id="loginError"></div>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="ÂØÜÁ†Å" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-full">ÁôªÂΩï</button>
                <div class="modal-footer">
                    ÂøòËÆ∞ÂØÜÁ†ÅÔºü<span class="modal-link" id="toRegister">Ê≥®ÂÜåË¥¶Âè∑</span>
                </div>
            </form>
            
            <form class="modal-form" id="registerForm">
                <div class="form-group">
                    <input type="text" class="form-input" placeholder="Áî®Êà∑Âêç" id="registerUsername" required>
                    <div class="error-message" id="usernameError"></div>
                </div>
                <div class="form-group">
                    <input type="email" class="form-input" placeholder="ÈÇÆÁÆ±Âú∞ÂùÄ (‰æãÂ¶Ç: example@gmail.com)" id="registerEmail" required>
                    <div class="email-hint" id="emailHint">ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄ</div>
                </div>
                <div class="form-group">
                    <div class="captcha-group">
                        <input type="text" class="form-input captcha-input" placeholder="È™åËØÅÁ†Å" id="registerCaptcha" required>
                        <button type="button" class="captcha-btn" id="sendCaptcha">ÂèëÈÄÅÈ™åËØÅÁ†Å</button>
                    </div>
                    <div class="countdown" id="captchaCountdown"></div>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="ÂØÜÁ†Å" id="registerPassword" required>
                    <div class="error-message" id="passwordError"></div>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="Á°ÆËÆ§ÂØÜÁ†Å" id="registerConfirmPassword" required>
                    <div class="error-message" id="confirmPasswordError"></div>
                </div>
                <button type="submit" class="btn btn-full">Ê≥®ÂÜå</button>
                <div class="modal-footer">
                    Â∑≤ÊúâË¥¶Âè∑Ôºü<span class="modal-link" id="toLogin">Á´ãÂç≥ÁôªÂΩï</span>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ÊêúÁ¥¢Ê®°ÊÄÅÊ°Ü -->
    <div class="search-modal" id="searchModal">
        <div class="search-container">
            <div class="close-modal" id="closeSearch">&times;</div>
            <div class="search-title">ÊêúÁ¥¢Áî®Êà∑</div>
            <div class="search-input-group">
                <input type="text" class="search-input" placeholder="ÊêúÁ¥¢Áî®Êà∑KCÂè∑ÊàñÁî®Êà∑Âêç" id="searchInput">
                <button class="search-btn" id="searchButton">ÊêúÁ¥¢</button>
            </div>
            <div class="search-results" id="searchResults">
                <!-- ÊêúÁ¥¢ÁªìÊûúÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
            </div>
        </div>
    </div>
    
    <!-- ÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®Ê®°ÊÄÅÊ°Ü -->
    <div class="follow-modal" id="followModal">
        <div class="follow-container">
            <div class="follow-header">
                <div class="follow-title" id="followModalTitle">ÂÖ≥Ê≥®ÂàóË°®</div>
                <div class="close-modal" id="closeFollow">&times;</div>
            </div>
            <div class="follow-tabs">
                <div class="follow-tab active" data-type="following">ÂÖ≥Ê≥®</div>
                <div class="follow-tab" data-type="followers">Á≤â‰∏ù</div>
            </div>
            <div class="follow-list" id="followList">
                <!-- ÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
            </div>
        </div>
    </div>
    
    <!-- ÈÄÄÂá∫ÁôªÂΩïÊ®°ÊÄÅÊ°Ü -->
    <div class="logout-modal" id="logoutModal">
        <div class="logout-container">
            <div class="logout-title">Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü</div>
            <div class="logout-actions">
                <button class="btn logout-btn cancel" id="cancelLogout">ÂèñÊ∂à</button>
                <button class="btn logout-btn" id="confirmLogout">ÈÄÄÂá∫</button>
            </div>
        </div>
    </div>
    
    <!-- Â§¥ÂÉè‰∏ä‰º†Ê®°ÊÄÅÊ°Ü -->
    <div class="avatar-modal" id="avatarModal">
        <div class="avatar-container">
            <div class="close-modal" id="closeAvatar">&times;</div>
            <div class="avatar-title">Êõ¥Êç¢Â§¥ÂÉè</div>
            <div class="avatar-preview" id="avatarPreview">
                <i class="fas fa-user" style="font-size: 60px; color: #666;"></i>
            </div>
            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
            <div class="avatar-actions">
                <button class="btn avatar-btn" id="selectAvatar">ÈÄâÊã©ÂõæÁâá</button>
                <button class="btn avatar-btn" id="saveAvatar">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>
    
    <!-- ÂèëÂ∏ÉËßÜÈ¢ëÊ®°ÊÄÅÊ°Ü -->
    <div class="publish-modal" id="publishModal">
        <div class="publish-container">
            <div class="close-modal" id="closePublish">&times;</div>
            <div class="publish-title">ÂèëÂ∏ÉËßÜÈ¢ë</div>
            <div class="publish-preview" id="videoPreview">
                <i class="fas fa-video" style="font-size: 60px; color: #666;"></i>
            </div>
            <div class="publish-upload">
                <label for="videoInput" class="publish-upload-btn">
                    <i class="fas fa-upload"></i> ÈÄâÊã©ËßÜÈ¢ëÊñá‰ª∂
                </label>
                <input type="file" id="videoInput" accept="video/*" style="display: none;">
            </div>
            <div class="form-group">
                <input type="text" class="form-input" placeholder="ËßÜÈ¢ëÊèèËø∞" id="videoDesc">
            </div>
            <div class="form-group">
                <input type="text" class="form-input" placeholder="ËÉåÊôØÈü≥‰πê" id="videoMusic">
            </div>
            <div class="publish-actions">
                <button class="btn publish-btn" id="cancelPublish">ÂèñÊ∂à</button>
                <button class="btn publish-btn" id="submitPublish">ÂèëÂ∏É</button>
            </div>
        </div>
    </div>
    
    <!-- ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü -->
    <div class="comment-modal" id="commentModal">
        <div class="comment-header">
            <span>ËØÑËÆ∫</span>
            <div class="close-modal" id="closeComment">&times;</div>
        </div>
        <div class="comment-list" id="commentList">
            <!-- ËØÑËÆ∫Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
        </div>
        <div class="comment-input">
            <input type="text" placeholder="ËØ¥ÁÇπ‰ªÄ‰πà..." id="commentInput">
            <div class="comment-send" id="sendComment">
                <i class="fas fa-paper-plane"></i>
            </div>
        </div>
    </div>
    
    <!-- ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü -->
    <div class="share-modal" id="shareModal">
        <div class="share-header">ÂàÜ‰∫´Âà∞</div>
        <div class="share-options">
            <div class="share-option">
                <div class="share-icon" style="background-color: #07c160;">
                    <i class="fab fa-weixin" style="color: white;"></i>
                </div>
                <div class="share-label">ÂæÆ‰ø°</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #1da1f2;">
                    <i class="fab fa-twitter" style="color: white;"></i>
                </div>
                <div class="share-label">Twitter</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #1877f2;">
                    <i class="fab fa-facebook-f" style="color: white;"></i>
                </div>
                <div class="share-label">Facebook</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #ff3366;">
                    <i class="fas fa-share-alt" style="color: white;"></i>
                </div>
                <div class="share-label">KC</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #25d366;">
                    <i class="fab fa-whatsapp" style="color: white;"></i>
                </div>
                <div class="share-label">WhatsApp</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #0088cc;">
                    <i class="fab fa-telegram" style="color: white;"></i>
                </div>
                <div class="share-label">Telegram</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #ff4500;">
                    <i class="fab fa-reddit" style="color: white;"></i>
                </div>
                <div class="share-label">Reddit</div>
            </div>
            <div class="share-option">
                <div class="share-icon" style="background-color: #333;">
                    <i class="fas fa-link" style="color: white;"></i>
                </div>
                <div class="share-label">Â§çÂà∂ÈìæÊé•</div>
            </div>
        </div>
    </div>
    
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <div class="header">
        <div class="logo">KC</div>
        <div class="header-actions">
            <div class="search-icon" id="openSearch">
                <i class="fas fa-search"></i>
            </div>
            <div class="camera-icon" id="openPublish">
                <i class="fas fa-camera"></i>
            </div>
            <button class="login-btn" id="showAuth">ÁôªÂΩï</button>
            <div class="user-avatar" id="userAvatar" style="display: none;"></div>
        </div>
    </div>
    
    <!-- ËßÜÈ¢ëÊµÅÂå∫Âüü -->
    <div class="video-container" id="videoContainer">
        <!-- ËßÜÈ¢ëÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
    </div>
    
    <!-- Áî®Êà∑‰∏ªÈ°µ -->
    <div class="profile-page" id="profilePage">
        <div class="profile-header">
            <div class="profile-avatar" id="profileAvatarContainer">
                <div class="profile-avatar" id="profileAvatar"></div>
                <div class="avatar-edit" id="editAvatar">
                    <i class="fas fa-camera"></i>
                </div>
            </div>
            <div class="profile-info">
                <div class="profile-name" id="profileName">Áî®Êà∑Âêç</div>
                <div class="profile-id" id="profileId">KCÂè∑: 123456789</div>
                <div class="profile-stats">
                    <div class="stat-item" id="followCountItem">
                        <div class="stat-count" id="followCount">0</div>
                        <div class="stat-label">ÂÖ≥Ê≥®</div>
                    </div>
                    <div class="stat-item" id="fansCountItem">
                        <div class="stat-count" id="fansCount">0</div>
                        <div class="stat-label">Á≤â‰∏ù</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-count" id="likeCount">0</div>
                        <div class="stat-label">Ëé∑Ëµû</div>
                    </div>
                </div>
                <div class="profile-actions">
                    <div class="profile-btn primary" id="editProfile">ÁºñËæëËµÑÊñô</div>
                    <div class="profile-btn" id="logoutBtn">ÈÄÄÂá∫ÁôªÂΩï</div>
                </div>
            </div>
        </div>
        
        <div class="profile-tabs">
            <div class="profile-tab active">‰ΩúÂìÅ</div>
            <div class="profile-tab">ÂñúÊ¨¢</div>
        </div>
        
        <div class="profile-content" id="profileContent">
            <!-- Áî®Êà∑‰ΩúÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
        </div>
    </div>
    
    <!-- Ê∂àÊÅØÈ°µÈù¢ -->
    <div class="message-page" id="messagePage">
        <div class="message-list" id="messageList">
            <!-- Ê∂àÊÅØÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
        </div>
    </div>
    
    <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->
    <div class="footer">
        <div class="nav-item active" data-page="home">
            <div class="nav-icon">
                <i class="fas fa-home"></i>
            </div>
            <div>È¶ñÈ°µ</div>
        </div>
        <div class="nav-item" data-page="discover">
            <div class="nav-icon">
                <i class="fas fa-compass"></i>
            </div>
            <div>ÂèëÁé∞</div>
        </div>
        <div class="nav-item" data-page="publish" id="publishNav">
            <div class="nav-icon">
                <i class="fas fa-plus-circle"></i>
            </div>
            <div>ÂèëÂ∏É</div>
        </div>
        <div class="nav-item" data-page="message" id="messageNav">
            <div class="nav-icon">
                <i class="fas fa-comment"></i>
            </div>
            <div>Ê∂àÊÅØ</div>
        </div>
        <div class="nav-item" data-page="profile" id="profileNav">
            <div class="nav-icon">
                <i class="fas fa-user"></i>
            </div>
            <div>Êàë</div>
        </div>
    </div>
    
    <!-- ÂèëÂ∏ÉÊåâÈíÆ -->
    <div class="publish-animation" id="publishBtn">
        <i class="fas fa-plus"></i>
    </div>
    
    <script>
        // ÂàùÂßãÂåñÊï∞ÊçÆ
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('kc_users')) || [];
        let videoData = JSON.parse(localStorage.getItem('kc_videos')) || [];
        let messages = JSON.parse(localStorage.getItem('kc_messages')) || [];
        let kcIdCounter = parseInt(localStorage.getItem('kc_id_counter')) || 100000;
        
        // ÂàùÂßãÂåñÁ§∫‰æãÊï∞ÊçÆ
        if (users.length === 0) {
            // Ê∑ªÂä†Á§∫‰æãÁî®Êà∑
            const exampleUser = {
                id: 1,
                username: "ÊóÖË°åËææ‰∫∫",
                email: "travel@example.com",
                password: "123456",
                avatar: "",
                followCount: 0,
                fansCount: 0,
                likeCount: 0,
                kcId: "100001",
                following: [],
                followers: []
            };
            users.push(exampleUser);
            
            // Ê∑ªÂä†Á§∫‰æãËßÜÈ¢ë
            const exampleVideo = {
                id: 1,
                username: "ÊóÖË°åËææ‰∫∫",
                avatar: "",
                videoUrl: "https://assets.mixkit.co/videos/preview/mixkit-waves-in-the-water-1164-large.mp4",
                description: "Áæé‰∏ΩÁöÑÊµ∑ËæπÊó•ËêΩÔºåÂ§™Ê≤ªÊÑà‰∫ÜÔºÅüåÖ",
                music: "Ê≤ªÊÑàÁ≥ªÁ∫ØÈü≥‰πê - Êµ∑ËæπÊó•ËêΩ",
                likes: 1234,
                comments: 56,
                shares: 12,
                userId: 1,
                likedBy: [],
                commentsList: [
                    { id: 1, username: "Áî®Êà∑A", avatar: "", text: "Â§™Áæé‰∫ÜÔºÅ", likes: 5 },
                    { id: 2, username: "Áî®Êà∑B", avatar: "", text: "Êàë‰πüÊÉ≥ÂéªËøôÈáåÔºÅ", likes: 3 }
                ]
            };
            videoData.push(exampleVideo);
            
            // ‰øùÂ≠òÊï∞ÊçÆ
            localStorage.setItem('kc_users', JSON.stringify(users));
            localStorage.setItem('kc_videos', JSON.stringify(videoData));
            localStorage.setItem('kc_id_counter', kcIdCounter.toString());
        }
        
        // DOMÂÖÉÁ¥†
        const authModal = document.getElementById('authModal');
        const closeAuth = document.getElementById('closeAuth');
        const showAuth = document.getElementById('showAuth');
        const authTabs = document.querySelectorAll('.modal-tab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const toRegister = document.getElementById('toRegister');
        const toLogin = document.getElementById('toLogin');
        const userAvatar = document.getElementById('userAvatar');
        const profileNav = document.getElementById('profileNav');
        const videoContainer = document.getElementById('videoContainer');
        const profilePage = document.getElementById('profilePage');
        const profileName = document.getElementById('profileName');
        const profileId = document.getElementById('profileId');
        const profileAvatar = document.getElementById('profileAvatar');
        const followCount = document.getElementById('followCount');
        const fansCount = document.getElementById('fansCount');
        const likeCount = document.getElementById('likeCount');
        const profileContent = document.getElementById('profileContent');
        const navItems = document.querySelectorAll('.nav-item');
        const registerEmail = document.getElementById('registerEmail');
        const emailHint = document.getElementById('emailHint');
        const publishBtn = document.getElementById('publishBtn');
        const commentModal = document.getElementById('commentModal');
        const closeComment = document.getElementById('closeComment');
        const commentList = document.getElementById('commentList');
        const commentInput = document.getElementById('commentInput');
        const sendComment = document.getElementById('sendComment');
        const shareModal = document.getElementById('shareModal');
        const avatarModal = document.getElementById('avatarModal');
        const closeAvatar = document.getElementById('closeAvatar');
        const avatarPreview = document.getElementById('avatarPreview');
        const avatarInput = document.getElementById('avatarInput');
        const selectAvatar = document.getElementById('selectAvatar');
        const saveAvatar = document.getElementById('saveAvatar');
        const editAvatar = document.getElementById('editAvatar');
        const profileAvatarContainer = document.getElementById('profileAvatarContainer');
        const publishModal = document.getElementById('publishModal');
        const closePublish = document.getElementById('closePublish');
        const videoPreview = document.getElementById('videoPreview');
        const videoInput = document.getElementById('videoInput');
        const cancelPublish = document.getElementById('cancelPublish');
        const submitPublish = document.getElementById('submitPublish');
        const videoDesc = document.getElementById('videoDesc');
        const videoMusic = document.getElementById('videoMusic');
        const openPublish = document.getElementById('openPublish');
        const sendCaptcha = document.getElementById('sendCaptcha');
        const registerCaptcha = document.getElementById('registerCaptcha');
        const captchaCountdown = document.getElementById('captchaCountdown');
        const searchModal = document.getElementById('searchModal');
        const openSearch = document.getElementById('openSearch');
        const closeSearch = document.getElementById('closeSearch');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchResults = document.getElementById('searchResults');
        const followModal = document.getElementById('followModal');
        const closeFollow = document.getElementById('closeFollow');
        const followModalTitle = document.getElementById('followModalTitle');
        const followTabs = document.querySelectorAll('.follow-tab');
        const followList = document.getElementById('followList');
        const followCountItem = document.getElementById('followCountItem');
        const fansCountItem = document.getElementById('fansCountItem');
        const messagePage = document.getElementById('messagePage');
        const messageList = document.getElementById('messageList');
        const messageNav = document.getElementById('messageNav');
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutModal = document.getElementById('logoutModal');
        const cancelLogout = document.getElementById('cancelLogout');
        const confirmLogout = document.getElementById('confirmLogout');
        const editProfile = document.getElementById('editProfile');
        
        // ÂΩìÂâçÊ≠£Âú®Êìç‰ΩúÁöÑÂØπË±°
        let currentVideoId = null;
        let newAvatar = null;
        let newVideo = null;
        let captchaCode = null;
        let captchaTimer = null;
        let countdownSeconds = 60;
        let currentFollowType = 'following';
        
        // ÈÇÆÁÆ±È™åËØÅÂáΩÊï∞
        function validateEmail(email) {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
        
        // ÊòæÁ§∫ÈîôËØØÊ∂àÊÅØ
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        // ÈöêËóèÈîôËØØÊ∂àÊÅØ
        function hideError(elementId) {
            const errorElement = document.getElementById(elementId);
            errorElement.style.display = 'none';
        }
        
        // ÁîüÊàêÂîØ‰∏ÄÁöÑKCÂè∑
        function generateKcId() {
            kcIdCounter++;
            localStorage.setItem('kc_id_counter', kcIdCounter.toString());
            return kcIdCounter.toString();
        }
        
        // ÂèëÈÄÅÈ™åËØÅÁ†Å
        sendCaptcha.addEventListener('click', () => {
            const email = registerEmail.value;
            
            if (!email) {
                showNotification('ËØ∑ËæìÂÖ•ÈÇÆÁÆ±Âú∞ÂùÄÔºÅ');
                return;
            }
            
            if (!validateEmail(email)) {
                emailHint.style.display = 'block';
                registerEmail.style.borderColor = '#ff3366';
                showNotification('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄÔºÅ');
                return;
            }
            
            // Ê£ÄÊü•ÈÇÆÁÆ±ÊòØÂê¶Â∑≤Ë¢´Ê≥®ÂÜå
            if (users.find(u => u.email === email)) {
                showNotification('ËØ•ÈÇÆÁÆ±Â∑≤Ë¢´Ê≥®ÂÜåÔºÅ');
                return;
            }
            
            // Ê®°ÊãüÂèëÈÄÅÈ™åËØÅÁ†ÅÂà∞ÈÇÆÁÆ±
            captchaCode = Math.floor(1000 + Math.random() * 9000).toString();
            showNotification(`È™åËØÅÁ†ÅÂ∑≤ÂèëÈÄÅÂà∞ ${email}ÔºåÈ™åËØÅÁ†ÅÊòØÔºö${captchaCode}ÔºàÊºîÁ§∫Áî®Ôºâ`);
            
            // Á¶ÅÁî®ÊåâÈíÆÂπ∂ÂºÄÂßãÂÄíËÆ°Êó∂
            sendCaptcha.disabled = true;
            startCountdown();
        });
        
        // ÂºÄÂßãÂÄíËÆ°Êó∂
        function startCountdown() {
            countdownSeconds = 60;
            captchaCountdown.textContent = `${countdownSeconds}ÁßíÂêéÈáçÊñ∞ÂèëÈÄÅ`;
            
            captchaTimer = setInterval(() => {
                countdownSeconds--;
                captchaCountdown.textContent = `${countdownSeconds}ÁßíÂêéÈáçÊñ∞ÂèëÈÄÅ`;
                
                if (countdownSeconds <= 0) {
                    clearInterval(captchaTimer);
                    sendCaptcha.disabled = false;
                    captchaCountdown.textContent = '';
                }
            }, 1000);
        }
        
        // ÈÇÆÁÆ±ËæìÂÖ•È™åËØÅ
        registerEmail.addEventListener('blur', function() {
            if (this.value && !validateEmail(this.value)) {
                emailHint.style.display = 'block';
                this.style.borderColor = '#ff3366';
            } else {
                emailHint.style.display = 'none';
                this.style.borderColor = '#444';
            }
        });
        
        // ÊòæÁ§∫/ÈöêËóèËÆ§ËØÅÊ®°ÊÄÅÊ°Ü
        showAuth.addEventListener('click', () => {
            authModal.style.display = 'flex';
        });
        
        closeAuth.addEventListener('click', () => {
            authModal.style.display = 'none';
            // ÈáçÁΩÆÈ™åËØÅÁ†ÅÁä∂ÊÄÅ
            if (captchaTimer) {
                clearInterval(captchaTimer);
                sendCaptcha.disabled = false;
                captchaCountdown.textContent = '';
            }
        });
        
        // ÂàáÊç¢ÁôªÂΩï/Ê≥®ÂÜåÈÄâÈ°πÂç°
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                loginForm.classList.remove('active');
                registerForm.classList.remove('active');
                
                if (tabName === 'login') {
                    loginForm.classList.add('active');
                } else {
                    registerForm.classList.add('active');
                }
            });
        });
        
        toRegister.addEventListener('click', () => {
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="register"]').classList.add('active');
            
            loginForm.classList.remove('active');
            registerForm.classList.add('active');
        });
        
        toLogin.addEventListener('click', () => {
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="login"]').classList.add('active');
            
            registerForm.classList.remove('active');
            loginForm.classList.add('active');
        });
        
        // ÁôªÂΩïÂäüËÉΩ
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈîôËØØ‰ø°ÊÅØ
            hideError('loginError');
            
            // È™åËØÅÁî®Êà∑ - ÊîØÊåÅKCÂè∑ÊàñÁî®Êà∑ÂêçÁôªÂΩï
            const user = users.find(u => 
                (u.username === username || u.kcId === username) && 
                u.password === password
            );
            
            if (user) {
                currentUser = user;
                localStorage.setItem('kc_current_user', JSON.stringify(user));
                
                // Êõ¥Êñ∞UI
                showAuth.style.display = 'none';
                if (user.avatar) {
                    userAvatar.style.backgroundImage = `url(${user.avatar})`;
                    userAvatar.style.backgroundSize = 'cover';
                }
                userAvatar.style.display = 'block';
                
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                authModal.style.display = 'none';
                
                // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
                showNotification('ÁôªÂΩïÊàêÂäüÔºÅ');
                
                // Êõ¥Êñ∞‰∏™‰∫∫‰∏ªÈ°µ‰ø°ÊÅØ
                updateProfileInfo();
                
                // ÈáçÊñ∞ÂàùÂßãÂåñËßÜÈ¢ëÊµÅÔºåÊõ¥Êñ∞ÁÇπËµûÁä∂ÊÄÅ
                initVideoFeed();
            } else {
                showError('loginError', 'KCÂè∑/Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØÔºÅ');
            }
        });
        
        // Ê≥®ÂÜåÂäüËÉΩ
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const captcha = registerCaptcha.value;
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈîôËØØ‰ø°ÊÅØ
            hideError('usernameError');
            hideError('passwordError');
            hideError('confirmPasswordError');
            
            // È™åËØÅÈÇÆÁÆ±Ê†ºÂºè
            if (!validateEmail(email)) {
                emailHint.style.display = 'block';
                registerEmail.style.borderColor = '#ff3366';
                showNotification('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄÔºÅ');
                return;
            }
            
            // È™åËØÅÈ™åËØÅÁ†Å
            if (!captcha) {
                showNotification('ËØ∑ËæìÂÖ•È™åËØÅÁ†ÅÔºÅ');
                return;
            }
            
            if (captcha !== captchaCode) {
                showNotification('È™åËØÅÁ†ÅÈîôËØØÔºÅ');
                return;
            }
            
            // È™åËØÅÁî®Êà∑ÂêçÈïøÂ∫¶
            if (username.length < 3) {
                showError('usernameError', 'Áî®Êà∑ÂêçËá≥Â∞ëÈúÄË¶Å3‰∏™Â≠óÁ¨¶ÔºÅ');
                return;
            }
            
            // È™åËØÅÂØÜÁ†ÅÈïøÂ∫¶
            if (password.length < 6) {
                showError('passwordError', 'ÂØÜÁ†ÅËá≥Â∞ëÈúÄË¶Å6‰∏™Â≠óÁ¨¶ÔºÅ');
                return;
            }
            
            // È™åËØÅËæìÂÖ•
            if (password !== confirmPassword) {
                showError('confirmPasswordError', '‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥ÔºÅ');
                return;
            }
            
            if (users.find(u => u.username === username)) {
                showError('usernameError', 'Áî®Êà∑ÂêçÂ∑≤Â≠òÂú®ÔºÅ');
                return;
            }
            
            if (users.find(u => u.email === email)) {
                showError('emailError', 'ËØ•ÈÇÆÁÆ±Â∑≤Ë¢´Ê≥®ÂÜåÔºÅ');
                return;
            }
            
            // ÁîüÊàêÂîØ‰∏ÄÁöÑKCÂè∑
            const kcId = generateKcId();
            
            // ÂàõÂª∫Êñ∞Áî®Êà∑
            const newUser = {
                id: Date.now(),
                username,
                email,
                password,
                avatar: "",
                followCount: 0,
                fansCount: 0,
                likeCount: 0,
                kcId,
                following: [],
                followers: []
            };
            
            users.push(newUser);
            localStorage.setItem('kc_users', JSON.stringify(users));
            
            // Ëá™Âä®ÁôªÂΩï
            currentUser = newUser;
            localStorage.setItem('kc_current_user', JSON.stringify(newUser));
            
            // Êõ¥Êñ∞UI
            showAuth.style.display = 'none';
            userAvatar.style.backgroundImage = '';
            userAvatar.style.backgroundColor = '#fff';
            userAvatar.style.display = 'block';
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            authModal.style.display = 'none';
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            showNotification('Ê≥®ÂÜåÊàêÂäüÔºÅÂ∑≤Ëá™Âä®ÁôªÂΩï„ÄÇ');
            
            // Êõ¥Êñ∞‰∏™‰∫∫‰∏ªÈ°µ‰ø°ÊÅØ
            updateProfileInfo();
            
            // ÈáçÊñ∞ÂàùÂßãÂåñËßÜÈ¢ëÊµÅÔºåÊõ¥Êñ∞ÁÇπËµûÁä∂ÊÄÅ
            initVideoFeed();
        });
        
        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message) {
            // ÂàõÂª∫ÈÄöÁü•ÂÖÉÁ¥†
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // 3ÁßíÂêéÁßªÈô§ÈÄöÁü•
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('kc_current_user');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showAuth.style.display = 'none';
                if (currentUser.avatar) {
                    userAvatar.style.backgroundImage = `url(${currentUser.avatar})`;
                    userAvatar.style.backgroundSize = 'cover';
                } else {
                    userAvatar.style.backgroundColor = '#fff';
                }
                userAvatar.style.display = 'block';
                
                // Êõ¥Êñ∞‰∏™‰∫∫‰∏ªÈ°µ‰ø°ÊÅØ
                updateProfileInfo();
            }
        }
        
        // Êõ¥Êñ∞‰∏™‰∫∫‰∏ªÈ°µ‰ø°ÊÅØ
        function updateProfileInfo() {
            if (currentUser) {
                profileName.textContent = currentUser.username;
                profileId.textContent = `KCÂè∑: ${currentUser.kcId}`;
                if (currentUser.avatar) {
                    profileAvatar.style.backgroundImage = `url(${currentUser.avatar})`;
                    profileAvatar.style.backgroundSize = 'cover';
                } else {
                    profileAvatar.style.backgroundColor = '#fff';
                }
                followCount.textContent = currentUser.followCount;
                fansCount.textContent = currentUser.fansCount;
                likeCount.textContent = currentUser.likeCount;
            }
        }
        
        // ÁÇπËµûÂäüËÉΩ
        function likeVideo(videoId) {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            const video = videoData.find(v => v.id === videoId);
            if (!video) return;
            
            const userId = currentUser.id;
            const isLiked = video.likedBy.includes(userId);
            
            if (isLiked) {
                // ÂèñÊ∂àÁÇπËµû
                video.likedBy = video.likedBy.filter(id => id !== userId);
                video.likes--;
                
                // Êõ¥Êñ∞Áî®Êà∑Ëé∑ËµûÊï∞
                const videoOwner = users.find(u => u.id === video.userId);
                if (videoOwner) {
                    videoOwner.likeCount--;
                    localStorage.setItem('kc_users', JSON.stringify(users));
                }
            } else {
                // ÁÇπËµû
                video.likedBy.push(userId);
                video.likes++;
                
                // Êõ¥Êñ∞Áî®Êà∑Ëé∑ËµûÊï∞
                const videoOwner = users.find(u => u.id === video.userId);
                if (videoOwner) {
                    videoOwner.likeCount++;
                    localStorage.setItem('kc_users', JSON.stringify(users));
                }
                
                // ÂàõÂª∫ÁÇπËµûÂä®Áîª
                createLikeAnimation(videoId);
                
                // ÂèëÈÄÅÁÇπËµûÊ∂àÊÅØ
                if (videoOwner && videoOwner.id !== currentUser.id) {
                    const message = {
                        id: Date.now(),
                        type: 'like',
                        fromUser: currentUser.id,
                        fromUsername: currentUser.username,
                        toUser: videoOwner.id,
                        videoId: videoId,
                        text: `ÁÇπËµû‰∫Ü‰Ω†ÁöÑËßÜÈ¢ë`,
                        time: new Date().toISOString(),
                        read: false
                    };
                    messages.push(message);
                    localStorage.setItem('kc_messages', JSON.stringify(messages));
                }
            }
            
            // ‰øùÂ≠òÊõ¥Êñ∞ÂêéÁöÑËßÜÈ¢ëÊï∞ÊçÆ
            localStorage.setItem('kc_videos', JSON.stringify(videoData));
            
            // Êõ¥Êñ∞UI
            updateLikeUI(videoId);
            
            // Êõ¥Êñ∞‰∏™‰∫∫‰∏ªÈ°µ‰ø°ÊÅØ
            updateProfileInfo();
        }
        
        // ÂàõÂª∫ÁÇπËµûÂä®Áîª
        function createLikeAnimation(videoId) {
            const videoItem = document.querySelector(`[data-video-id="${videoId}"]`);
            if (!videoItem) return;
            
            const likeBtn = videoItem.querySelector('.action-item:nth-child(2)');
            const rect = likeBtn.getBoundingClientRect();
            
            // ÂàõÂª∫Â§ö‰∏™Áà±ÂøÉÂä®Áîª
            for (let i = 0; i < 5; i++) {
                const heart = document.createElement('div');
                heart.className = 'like-animation';
                heart.innerHTML = '<i class="fas fa-heart" style="color: #ff3366; font-size: 24px;"></i>';
                heart.style.left = `${rect.left + rect.width / 2}px`;
                heart.style.top = `${rect.top}px`;
                
                // Ê∑ªÂä†ÈöèÊú∫ÂÅèÁßª
                const randomX = (Math.random() - 0.5) * 100;
                const randomDelay = Math.random() * 0.5;
                
                heart.style.setProperty('--random-x', `${randomX}px`);
                heart.style.animationDelay = `${randomDelay}s`;
                
                document.body.appendChild(heart);
                
                // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§ÂÖÉÁ¥†
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.remove();
                    }
                }, 1000 + randomDelay * 1000);
            }
        }
        
        // Êõ¥Êñ∞ÁÇπËµûUI
        function updateLikeUI(videoId) {
            const video = videoData.find(v => v.id === videoId);
            if (!video) return;
            
            const videoItem = document.querySelector(`[data-video-id="${videoId}"]`);
            if (!videoItem) return;
            
            const likeBtn = videoItem.querySelector('.action-item:nth-child(2)');
            const likeIcon = likeBtn.querySelector('.action-icon');
            const likeCountEl = likeBtn.querySelector('.action-count');
            
            const isLiked = currentUser && video.likedBy.includes(currentUser.id);
            
            // Êõ¥Êñ∞ÂõæÊ†áÂíåÊ†∑Âºè
            if (isLiked) {
                likeIcon.classList.add('liked');
                likeIcon.querySelector('i').style.color = '#ff3366';
            } else {
                likeIcon.classList.remove('liked');
                likeIcon.querySelector('i').style.color = '#fff';
            }
            
            // Êõ¥Êñ∞ÁÇπËµûÊï∞
            likeCountEl.textContent = formatLikeCount(video.likes);
        }
        
        // Ê†ºÂºèÂåñÁÇπËµûÊï∞ÊòæÁ§∫
        function formatLikeCount(count) {
            if (count >= 10000) {
                return (count / 10000).toFixed(1) + '‰∏á';
            }
            return count.toString();
        }
        
        // ÂàùÂßãÂåñËßÜÈ¢ëÊµÅ
        function initVideoFeed() {
            videoContainer.innerHTML = '';
            
            // Á°Æ‰øùÂΩìÂâçÁî®Êà∑ÁöÑËßÜÈ¢ëÊòæÁ§∫Âú®È¶ñ‰Ωç
            const sortedVideos = [...videoData];
            if (currentUser) {
                // Â∞ÜÂΩìÂâçÁî®Êà∑ÁöÑËßÜÈ¢ëÁßªÂà∞ÂâçÈù¢
                sortedVideos.sort((a, b) => {
                    if (a.userId === currentUser.id && b.userId !== currentUser.id) return -1;
                    if (a.userId !== currentUser.id && b.userId === currentUser.id) return 1;
                    return 0;
                });
            }
            
            sortedVideos.forEach(video => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                videoItem.setAttribute('data-video-id', video.id);
                
                const isLiked = currentUser && video.likedBy.includes(currentUser.id);
                const likeIconClass = isLiked ? 'action-icon liked' : 'action-icon';
                const likeIconColor = isLiked ? '#ff3366' : '#fff';
                
                // Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ
                const videoUser = users.find(u => u.id === video.userId);
                const userAvatar = videoUser && videoUser.avatar ? videoUser.avatar : '';
                
                videoItem.innerHTML = `
                    <div class="sound-control" onclick="toggleMute(this)">
                        <i class="fas fa-volume-mute sound-icon"></i>
                    </div>
                    <video class="video-player" loop muted>
                        <source src="${video.videoUrl}" type="video/mp4">
                        ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËßÜÈ¢ëÊí≠Êîæ
                    </video>
                    <div class="video-info">
                        <div class="username">@${video.username}</div>
                        <div class="video-desc">${video.description}</div>
                        <div class="music-info">
                            <i class="fas fa-music music-icon"></i>
                            ${video.music}
                        </div>
                    </div>
                    <div class="action-bar">
                        <div class="action-item">
                            <div class="avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                            <div class="action-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="action-item" onclick="likeVideo(${video.id})">
                            <div class="${likeIconClass}">
                                <i class="fas fa-heart" style="color: ${likeIconColor}"></i>
                            </div>
                            <div class="action-count">${formatLikeCount(video.likes)}</div>
                        </div>
                        <div class="action-item" onclick="openComment(${video.id})">
                            <div class="action-icon">
                                <i class="fas fa-comment"></i>
                            </div>
                            <div class="action-count">${video.comments}</div>
                        </div>
                        <div class="action-item" onclick="openShare(${video.id})">
                            <div class="action-icon">
                                <i class="fas fa-share"></i>
                            </div>
                            <div class="action-count">${video.shares}</div>
                        </div>
                    </div>
                `;
                videoContainer.appendChild(videoItem);
            });
            
            // Ê∑ªÂä†Âä†ËΩΩÊõ¥Â§öÊåáÁ§∫Âô®
            const loadingIndicator = document.createElement('div');
            loadingIndicator.className = 'loading';
            loadingIndicator.innerHTML = '<div class="spinner"></div>';
            videoContainer.appendChild(loadingIndicator);
            
            // ËßÜÈ¢ëÊí≠ÊîæÊéßÂà∂
            const videos = document.querySelectorAll('.video-player');
            
            // ÂΩìËßÜÈ¢ëËøõÂÖ•ËßÜÂè£Êó∂Êí≠Êîæ
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const video = entry.target;
                    if (entry.isIntersecting) {
                        video.play();
                    } else {
                        video.pause();
                    }
                });
            }, { threshold: 0.7 });
            
            videos.forEach(video => {
                observer.observe(video);
            });
            
            // ÊªöÂä®Âà∞È°∂ÈÉ®ÔºåÁ°Æ‰øùÊñ∞ÂèëÂ∏ÉÁöÑËßÜÈ¢ëÂèØËßÅ
            videoContainer.scrollTop = 0;
        }
        
        // ÂàáÊç¢ÈùôÈü≥/ÂèñÊ∂àÈùôÈü≥
        function toggleMute(soundControl) {
            const videoItem = soundControl.closest('.video-item');
            const videoPlayer = videoItem.querySelector('.video-player');
            const soundIcon = soundControl.querySelector('.sound-icon');
            
            if (videoPlayer.muted) {
                videoPlayer.muted = false;
                soundIcon.className = 'fas fa-volume-up sound-icon';
            } else {
                videoPlayer.muted = true;
                soundIcon.className = 'fas fa-volume-mute sound-icon';
            }
        }
        
        // ÂàùÂßãÂåñ‰∏™‰∫∫‰∏ªÈ°µÂÜÖÂÆπ
        function initProfileContent() {
            profileContent.innerHTML = '';
            
            // ÊòæÁ§∫ÂΩìÂâçÁî®Êà∑ÁöÑËßÜÈ¢ë
            const userVideos = videoData.filter(video => video.userId === currentUser?.id);
            
            if (userVideos.length > 0) {
                userVideos.forEach(video => {
                    const videoElement = document.createElement('div');
                    videoElement.className = 'profile-video';
                    videoElement.innerHTML = `
                        <video class="video-player" loop muted onclick="playProfileVideo(this)">
                            <source src="${video.videoUrl}" type="video/mp4">
                        </video>
                        <div class="video-overlay">
                            <i class="fas fa-heart" style="margin-right: 3px;"></i>
                            <span>${formatLikeCount(video.likes)}</span>
                        </div>
                    `;
                    profileContent.appendChild(videoElement);
                });
            } else {
                // Â¶ÇÊûúÊ≤°ÊúâËßÜÈ¢ëÔºåÊòæÁ§∫ÊèêÁ§∫
                const noVideos = document.createElement('div');
                noVideos.style.gridColumn = '1 / 4';
                noVideos.style.textAlign = 'center';
                noVideos.style.padding = '40px 0';
                noVideos.style.color = '#999';
                noVideos.innerHTML = `
                    <i class="fas fa-video" style="font-size: 48px; margin-bottom: 15px;"></i>
                    <div>ÊöÇÊó†‰ΩúÂìÅ</div>
                    <div style="font-size: 12px; margin-top: 10px;">Âø´ÂéªÂèëÂ∏É‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™ËßÜÈ¢ëÂêßÔºÅ</div>
                `;
                profileContent.appendChild(noVideos);
            }
        }
        
        // Êí≠Êîæ‰∏™‰∫∫‰∏ªÈ°µËßÜÈ¢ë
        function playProfileVideo(videoElement) {
            if (videoElement.paused) {
                videoElement.play();
            } else {
                videoElement.pause();
            }
        }
        
        // ÂØºËà™ÂàáÊç¢
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const page = item.getAttribute('data-page');
                
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                // ÈöêËóèÊâÄÊúâÈ°µÈù¢
                videoContainer.style.display = 'none';
                profilePage.style.display = 'none';
                messagePage.style.display = 'none';
                
                if (page === 'profile') {
                    if (!currentUser) {
                        authModal.style.display = 'flex';
                        // ÈáçÁΩÆÂØºËà™Áä∂ÊÄÅ
                        navItems[0].classList.add('active');
                        item.classList.remove('active');
                        return;
                    }
                    
                    profilePage.style.display = 'block';
                    initProfileContent();
                } else if (page === 'publish') {
                    if (!currentUser) {
                        authModal.style.display = 'flex';
                        // ÈáçÁΩÆÂØºËà™Áä∂ÊÄÅ
                        navItems[0].classList.add('active');
                        item.classList.remove('active');
                        return;
                    }
                    openPublishModal();
                } else if (page === 'message') {
                    if (!currentUser) {
                        authModal.style.display = 'flex';
                        // ÈáçÁΩÆÂØºËà™Áä∂ÊÄÅ
                        navItems[0].classList.add('active');
                        item.classList.remove('active');
                        return;
                    }
                    messagePage.style.display = 'block';
                    initMessagePage();
                } else {
                    videoContainer.style.display = 'block';
                }
            });
        });
        
        // Áî®Êà∑Â§¥ÂÉèÁÇπÂáª‰∫ã‰ª∂
        userAvatar.addEventListener('click', () => {
            if (currentUser) {
                videoContainer.style.display = 'none';
                profilePage.style.display = 'block';
                messagePage.style.display = 'none';
                
                navItems.forEach(nav => nav.classList.remove('active'));
                profileNav.classList.add('active');
                
                initProfileContent();
            }
        });
        
        // ÂèëÂ∏ÉÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        publishBtn.addEventListener('click', () => {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            openPublishModal();
        });
        
        // È°∂ÈÉ®Áõ∏Êú∫ÂõæÊ†áÁÇπÂáª‰∫ã‰ª∂
        openPublish.addEventListener('click', () => {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            openPublishModal();
        });
        
        // ÊâìÂºÄÂèëÂ∏ÉÊ®°ÊÄÅÊ°Ü
        function openPublishModal() {
            publishModal.style.display = 'flex';
            videoPreview.innerHTML = '<i class="fas fa-video" style="font-size: 60px; color: #666;"></i>';
            videoDesc.value = '';
            videoMusic.value = '';
            newVideo = null;
        }
        
        // ÂÖ≥Èó≠ÂèëÂ∏ÉÊ®°ÊÄÅÊ°Ü
        closePublish.addEventListener('click', () => {
            publishModal.style.display = 'none';
        });
        
        cancelPublish.addEventListener('click', () => {
            publishModal.style.display = 'none';
        });
        
        // ËßÜÈ¢ë‰∏ä‰º†Â§ÑÁêÜ
        videoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const videoURL = URL.createObjectURL(file);
                videoPreview.innerHTML = `<video src="${videoURL}" controls style="width: 100%; height: 100%; object-fit: cover;"></video>`;
                newVideo = file;
            }
        });
        
        // Êèê‰∫§ÂèëÂ∏É
        submitPublish.addEventListener('click', () => {
            if (!newVideo) {
                showNotification('ËØ∑ÂÖàÈÄâÊã©ËßÜÈ¢ëÊñá‰ª∂ÔºÅ');
                return;
            }
            
            // ÂàõÂª∫Êñ∞ËßÜÈ¢ëÂØπË±°
            const newVideoObj = {
                id: Date.now(),
                username: currentUser.username,
                avatar: currentUser.avatar,
                videoUrl: URL.createObjectURL(newVideo),
                description: videoDesc.value || 'ÂàÜ‰∫´ÊàëÁöÑÁ≤æÂΩ©Áû¨Èó¥',
                music: videoMusic.value || 'ÂéüÂàõÈü≥‰πê',
                likes: 0,
                comments: 0,
                shares: 0,
                userId: currentUser.id,
                likedBy: [],
                commentsList: []
            };
            
            // Ê∑ªÂä†Âà∞ËßÜÈ¢ëÊï∞ÊçÆ
            videoData.unshift(newVideoObj);
            localStorage.setItem('kc_videos', JSON.stringify(videoData));
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            publishModal.style.display = 'none';
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            showNotification('ËßÜÈ¢ëÂèëÂ∏ÉÊàêÂäüÔºÅ');
            
            // ÈáçÊñ∞ÂàùÂßãÂåñËßÜÈ¢ëÊµÅ
            initVideoFeed();
            
            // ÂàáÊç¢Âà∞È¶ñÈ°µ
            navItems.forEach(nav => nav.classList.remove('active'));
            navItems[0].classList.add('active');
            videoContainer.style.display = 'block';
            profilePage.style.display = 'none';
            messagePage.style.display = 'none';
        });
        
        // ÊâìÂºÄËØÑËÆ∫Ê®°ÊÄÅÊ°Ü
        function openComment(videoId) {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            currentVideoId = videoId;
            const video = videoData.find(v => v.id === videoId);
            if (!video) return;
            
            // Êõ¥Êñ∞ËØÑËÆ∫ÂàóË°®
            commentList.innerHTML = '';
            video.commentsList.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment-item';
                const commentUser = users.find(u => u.username === comment.username);
                const userAvatar = commentUser && commentUser.avatar ? commentUser.avatar : '';
                
                commentElement.innerHTML = `
                    <div class="comment-avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                    <div class="comment-content">
                        <div class="comment-user">${comment.username}</div>
                        <div class="comment-text">${comment.text}</div>
                        <div class="comment-actions">
                            <span class="comment-time">2Â∞èÊó∂Ââç</span>
                            <span class="comment-like">${comment.likes}</span>
                        </div>
                    </div>
                `;
                commentList.appendChild(commentElement);
            });
            
            // ÊòæÁ§∫ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü
            commentModal.style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü
        closeComment.addEventListener('click', () => {
            commentModal.style.display = 'none';
        });
        
        // ÂèëÈÄÅËØÑËÆ∫
        sendComment.addEventListener('click', () => {
            const text = commentInput.value.trim();
            if (!text) return;
            
            const video = videoData.find(v => v.id === currentVideoId);
            if (!video) return;
            
            // Ê∑ªÂä†Êñ∞ËØÑËÆ∫
            const newComment = {
                id: Date.now(),
                username: currentUser.username,
                avatar: currentUser.avatar,
                text: text,
                likes: 0
            };
            
            video.commentsList.push(newComment);
            video.comments++;
            
            // ‰øùÂ≠òÊõ¥Êñ∞ÂêéÁöÑËßÜÈ¢ëÊï∞ÊçÆ
            localStorage.setItem('kc_videos', JSON.stringify(videoData));
            
            // Êõ¥Êñ∞ËØÑËÆ∫ÂàóË°®
            const commentElement = document.createElement('div');
            commentElement.className = 'comment-item';
            const userAvatar = currentUser.avatar ? currentUser.avatar : '';
            
            commentElement.innerHTML = `
                <div class="comment-avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                <div class="comment-content">
                    <div class="comment-user">${newComment.username}</div>
                    <div class="comment-text">${newComment.text}</div>
                    <div class="comment-actions">
                        <span class="comment-time">ÂàöÂàö</span>
                        <span class="comment-like">${newComment.likes}</span>
                    </div>
                </div>
            `;
            commentList.appendChild(commentElement);
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            commentInput.value = '';
            
            // Êõ¥Êñ∞UI
            updateCommentUI(currentVideoId);
            
            // ÂèëÈÄÅËØÑËÆ∫Ê∂àÊÅØ
            const videoOwner = users.find(u => u.id === video.userId);
            if (videoOwner && videoOwner.id !== currentUser.id) {
                const message = {
                    id: Date.now(),
                    type: 'comment',
                    fromUser: currentUser.id,
                    fromUsername: currentUser.username,
                    toUser: videoOwner.id,
                    videoId: currentVideoId,
                    text: `ËØÑËÆ∫‰∫Ü‰Ω†ÁöÑËßÜÈ¢ë: ${text}`,
                    time: new Date().toISOString(),
                    read: false
                };
                messages.push(message);
                localStorage.setItem('kc_messages', JSON.stringify(messages));
            }
        });
        
        // Êõ¥Êñ∞ËØÑËÆ∫UI
        function updateCommentUI(videoId) {
            const video = videoData.find(v => v.id === videoId);
            if (!video) return;
            
            const videoItem = document.querySelector(`[data-video-id="${videoId}"]`);
            if (!videoItem) return;
            
            const commentBtn = videoItem.querySelector('.action-item:nth-child(3)');
            const commentCountEl = commentBtn.querySelector('.action-count');
            
            // Êõ¥Êñ∞ËØÑËÆ∫Êï∞
            commentCountEl.textContent = video.comments;
        }
        
        // ÊâìÂºÄÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü
        function openShare(videoId) {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            currentVideoId = videoId;
            shareModal.style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü
        document.addEventListener('click', (e) => {
            if (e.target === shareModal) {
                shareModal.style.display = 'none';
            }
        });
        
        // ÁºñËæëÂ§¥ÂÉè
        editAvatar.addEventListener('click', () => {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            avatarModal.style.display = 'flex';
            if (currentUser.avatar) {
                avatarPreview.innerHTML = `<img src="${currentUser.avatar}">`;
            } else {
                avatarPreview.innerHTML = '<i class="fas fa-user" style="font-size: 60px; color: #666;"></i>';
            }
            newAvatar = null;
        });
        
        // ÂÖ≥Èó≠Â§¥ÂÉèÊ®°ÊÄÅÊ°Ü
        closeAvatar.addEventListener('click', () => {
            avatarModal.style.display = 'none';
        });
        
        // ÈÄâÊã©Â§¥ÂÉè
        selectAvatar.addEventListener('click', () => {
            avatarInput.click();
        });
        
        // Â§¥ÂÉè‰∏ä‰º†Â§ÑÁêÜ
        avatarInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const imageURL = URL.createObjectURL(file);
                avatarPreview.innerHTML = `<img src="${imageURL}">`;
                newAvatar = file;
            }
        });
        
        // ‰øùÂ≠òÂ§¥ÂÉè
        saveAvatar.addEventListener('click', () => {
            if (!newAvatar) {
                showNotification('ËØ∑ÂÖàÈÄâÊã©Â§¥ÂÉèÂõæÁâáÔºÅ');
                return;
            }
            
            // Êõ¥Êñ∞Áî®Êà∑Â§¥ÂÉè
            const imageURL = URL.createObjectURL(newAvatar);
            currentUser.avatar = imageURL;
            localStorage.setItem('kc_current_user', JSON.stringify(currentUser));
            
            // Êõ¥Êñ∞Áî®Êà∑Êï∞ÊçÆ
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex].avatar = imageURL;
                localStorage.setItem('kc_users', JSON.stringify(users));
            }
            
            // Êõ¥Êñ∞UI
            userAvatar.style.backgroundImage = `url(${imageURL})`;
            userAvatar.style.backgroundSize = 'cover';
            profileAvatar.style.backgroundImage = `url(${imageURL})`;
            profileAvatar.style.backgroundSize = 'cover';
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            avatarModal.style.display = 'none';
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            showNotification('Â§¥ÂÉèÊõ¥Êñ∞ÊàêÂäüÔºÅ');
        });
        
        // ÊâìÂºÄÊêúÁ¥¢Ê®°ÊÄÅÊ°Ü
        openSearch.addEventListener('click', () => {
            searchModal.style.display = 'flex';
            searchInput.value = '';
            searchResults.innerHTML = '';
        });
        
        // ÂÖ≥Èó≠ÊêúÁ¥¢Ê®°ÊÄÅÊ°Ü
        closeSearch.addEventListener('click', () => {
            searchModal.style.display = 'none';
        });
        
        // ÊêúÁ¥¢ÂäüËÉΩ
        searchButton.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (!query) return;
            
            // ÊêúÁ¥¢Áî®Êà∑
            const results = users.filter(user => 
                user.username.includes(query) || user.kcId.includes(query)
            );
            
            // ÊòæÁ§∫ÊêúÁ¥¢ÁªìÊûú
            searchResults.innerHTML = '';
            if (results.length > 0) {
                results.forEach(user => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    const userAvatar = user.avatar ? user.avatar : '';
                    
                    resultItem.innerHTML = `
                        <div class="search-result-avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                        <div class="search-result-info">
                            <div class="search-result-name">${user.username}</div>
                            <div class="search-result-id">KCÂè∑: ${user.kcId}</div>
                        </div>
                    `;
                    resultItem.addEventListener('click', () => {
                        // ËøôÈáåÂèØ‰ª•Ë∑≥ËΩ¨Âà∞Áî®Êà∑‰∏ªÈ°µ
                        showNotification(`Êü•ÁúãÁî®Êà∑ ${user.username} ÁöÑ‰∏ªÈ°µ`);
                        searchModal.style.display = 'none';
                    });
                    searchResults.appendChild(resultItem);
                });
            } else {
                searchResults.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">Êú™ÊâæÂà∞Áõ∏ÂÖ≥Áî®Êà∑</div>';
            }
        });
        
        // ÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®
        followCountItem.addEventListener('click', () => {
            if (!currentUser) return;
            openFollowModal('following');
        });
        
        fansCountItem.addEventListener('click', () => {
            if (!currentUser) return;
            openFollowModal('followers');
        });
        
        function openFollowModal(type) {
            currentFollowType = type;
            followModal.style.display = 'flex';
            followModalTitle.textContent = type === 'following' ? 'ÂÖ≥Ê≥®ÂàóË°®' : 'Á≤â‰∏ùÂàóË°®';
            
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
            followTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-type') === type) {
                    tab.classList.add('active');
                }
            });
            
            // Âä†ËΩΩÂàóË°®
            loadFollowList(type);
        }
        
        // ÂÖ≥Èó≠ÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®Ê®°ÊÄÅÊ°Ü
        closeFollow.addEventListener('click', () => {
            followModal.style.display = 'none';
        });
        
        // ÂàáÊç¢ÂÖ≥Ê≥®/Á≤â‰∏ùÊ†áÁ≠æÈ°µ
        followTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const type = tab.getAttribute('data-type');
                currentFollowType = type;
                followModalTitle.textContent = type === 'following' ? 'ÂÖ≥Ê≥®ÂàóË°®' : 'Á≤â‰∏ùÂàóË°®';
                
                // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
                followTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Âä†ËΩΩÂàóË°®
                loadFollowList(type);
            });
        });
        
        // Âä†ËΩΩÂÖ≥Ê≥®/Á≤â‰∏ùÂàóË°®
        function loadFollowList(type) {
            followList.innerHTML = '';
            
            let list = [];
            if (type === 'following') {
                list = currentUser.following.map(id => users.find(u => u.id === id)).filter(u => u);
            } else {
                list = currentUser.followers.map(id => users.find(u => u.id === id)).filter(u => u);
            }
            
            if (list.length > 0) {
                list.forEach(user => {
                    const followItem = document.createElement('div');
                    followItem.className = 'follow-item';
                    const userAvatar = user.avatar ? user.avatar : '';
                    const isFollowing = currentUser.following.includes(user.id);
                    
                    followItem.innerHTML = `
                        <div class="follow-avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                        <div class="follow-info">
                            <div class="follow-name">${user.username}</div>
                            <div class="follow-id">KCÂè∑: ${user.kcId}</div>
                        </div>
                        <button class="follow-action ${isFollowing ? 'following' : ''}" onclick="toggleFollow(${user.id})">
                            ${isFollowing ? 'Â∑≤ÂÖ≥Ê≥®' : 'ÂÖ≥Ê≥®'}
                        </button>
                    `;
                    followList.appendChild(followItem);
                });
            } else {
                followList.innerHTML = `<div style="text-align: center; color: #999; padding: 20px;">${type === 'following' ? 'ÊöÇÊó†ÂÖ≥Ê≥®' : 'ÊöÇÊó†Á≤â‰∏ù'}</div>`;
            }
        }
        
        // ÂÖ≥Ê≥®/ÂèñÊ∂àÂÖ≥Ê≥®
        function toggleFollow(userId) {
            if (!currentUser) return;
            
            const userIndex = users.findIndex(u => u.id === userId);
            if (userIndex === -1) return;
            
            const isFollowing = currentUser.following.includes(userId);
            
            if (isFollowing) {
                // ÂèñÊ∂àÂÖ≥Ê≥®
                currentUser.following = currentUser.following.filter(id => id !== userId);
                currentUser.followCount--;
                
                // Êõ¥Êñ∞Ë¢´ÂÖ≥Ê≥®Áî®Êà∑ÁöÑÁ≤â‰∏ùÊï∞
                users[userIndex].followers = users[userIndex].followers.filter(id => id !== currentUser.id);
                users[userIndex].fansCount--;
            } else {
                // ÂÖ≥Ê≥®
                currentUser.following.push(userId);
                currentUser.followCount++;
                
                // Êõ¥Êñ∞Ë¢´ÂÖ≥Ê≥®Áî®Êà∑ÁöÑÁ≤â‰∏ùÊï∞
                users[userIndex].followers.push(currentUser.id);
                users[userIndex].fansCount++;
                
                // ÂèëÈÄÅÂÖ≥Ê≥®Ê∂àÊÅØ
                const message = {
                    id: Date.now(),
                    type: 'follow',
                    fromUser: currentUser.id,
                    fromUsername: currentUser.username,
                    toUser: userId,
                    text: `ÂÖ≥Ê≥®‰∫Ü‰Ω†`,
                    time: new Date().toISOString(),
                    read: false
                };
                messages.push(message);
                localStorage.setItem('kc_messages', JSON.stringify(messages));
            }
            
            // ‰øùÂ≠òÊï∞ÊçÆ
            localStorage.setItem('kc_users', JSON.stringify(users));
            localStorage.setItem('kc_current_user', JSON.stringify(currentUser));
            
            // Êõ¥Êñ∞UI
            updateProfileInfo();
            
            // ÈáçÊñ∞Âä†ËΩΩÂàóË°®
            loadFollowList(currentFollowType);
            
            // ÊòæÁ§∫ÈÄöÁü•
            showNotification(isFollowing ? 'Â∑≤ÂèñÊ∂àÂÖ≥Ê≥®' : 'ÂÖ≥Ê≥®ÊàêÂäü');
        }
        
        // ÂàùÂßãÂåñÊ∂àÊÅØÈ°µÈù¢
        function initMessagePage() {
            messageList.innerHTML = '';
            
            // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑ÁöÑÊ∂àÊÅØ
            const userMessages = messages.filter(m => m.toUser === currentUser.id);
            
            if (userMessages.length > 0) {
                userMessages.forEach(message => {
                    const messageItem = document.createElement('div');
                    messageItem.className = 'message-item';
                    const fromUser = users.find(u => u.id === message.fromUser);
                    const userAvatar = fromUser && fromUser.avatar ? fromUser.avatar : '';
                    
                    messageItem.innerHTML = `
                        <div class="message-avatar" style="${userAvatar ? `background-image: url(${userAvatar}); background-size: cover;` : 'background-color: #fff;'}"></div>
                        <div class="message-content">
                            <div class="message-user">${fromUser ? fromUser.username : 'Êú™Áü•Áî®Êà∑'}</div>
                            <div class="message-text">${message.text}</div>
                        </div>
                        <div class="message-time">${formatTime(message.time)}</div>
                    `;
                    messageList.appendChild(messageItem);
                });
            } else {
                messageList.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">ÊöÇÊó†Ê∂àÊÅØ</div>';
            }
        }
        
        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(timeString) {
            const time = new Date(timeString);
            const now = new Date();
            const diff = now - time;
            
            if (diff < 60000) { // 1ÂàÜÈíüÂÜÖ
                return 'ÂàöÂàö';
            } else if (diff < 3600000) { // 1Â∞èÊó∂ÂÜÖ
                return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç';
            } else if (diff < 86400000) { // 1Â§©ÂÜÖ
                return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç';
            } else {
                return time.getMonth() + 1 + 'Êúà' + time.getDate() + 'Êó•';
            }
        }
        
        // ÈÄÄÂá∫ÁôªÂΩï
        logoutBtn.addEventListener('click', () => {
            logoutModal.style.display = 'flex';
        });
        
        // ÂèñÊ∂àÈÄÄÂá∫ÁôªÂΩï
        cancelLogout.addEventListener('click', () => {
            logoutModal.style.display = 'none';
        });
        
        // Á°ÆËÆ§ÈÄÄÂá∫ÁôªÂΩï
        confirmLogout.addEventListener('click', () => {
            currentUser = null;
            localStorage.removeItem('kc_current_user');
            
            // Êõ¥Êñ∞UI
            showAuth.style.display = 'block';
            userAvatar.style.display = 'none';
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            logoutModal.style.display = 'none';
            
            // ÊòæÁ§∫ÈÄöÁü•
            showNotification('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');
            
            // ÂàáÊç¢Âà∞È¶ñÈ°µ
            navItems.forEach(nav => nav.classList.remove('active'));
            navItems[0].classList.add('active');
            videoContainer.style.display = 'block';
            profilePage.style.display = 'none';
            messagePage.style.display = 'none';
        });
        
        // ÁºñËæëËµÑÊñô
        editProfile.addEventListener('click', () => {
            showNotification('ÁºñËæëËµÑÊñôÂäüËÉΩÂºÄÂèë‰∏≠...');
        });
        
        // ÂàùÂßãÂåñ
        function init() {
            checkLoginStatus();
            initVideoFeed();
            initProfileContent();
        }
        
        // ÂêØÂä®Â∫îÁî®
        init();
    </script>
</body>
</html>
